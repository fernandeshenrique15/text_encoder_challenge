<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codificador - Challenge Oracle ONE</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="src/css/index.css" />    
    <script>

        function removeError(inputEntry){
            if(inputEntry.classList.contains('is-error')) {
                inputEntry.classList.remove('is-error');
            }
        }

        function addError(inputEntry){
            inputEntry.classList.add('is-error');
        }

        function scrollMobile(){
            if(window.matchMedia("(max-width: 768px)").matches){
                window.scrollTo(0, 900);
            }
        }

        function copy(){
            var inputOutput = document.getElementById('inputOutput');
            inputOutput.select();
            inputOutput.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(inputOutput.value);
        }

        function encrypt() {
            var inputEntry = document.getElementById('inputEntry');
            var inputOutput = document.getElementById('inputOutput');
            var divNoContent = document.getElementById('no-content');
            var divResult = document.getElementById('result');
            var textEntry = inputEntry.value;
            inputOutput.value = '';
            var textOutput = inputOutput.value;

            if(textEntry == ""){
                addError(inputEntry);
            } else {
                removeError(inputEntry);
                for (var i = 0; i < textEntry.length; i++) {
                    var charAt = textEntry.charAt(i);
                    
                    if(charAt === 'e'){
                        textOutput += 'enter';
                    } else if(charAt === 'i'){
                        textOutput += 'imes';
                    } else if(charAt === 'a'){
                        textOutput += 'ai';
                    } else if(charAt === 'o'){
                        textOutput += 'ober';
                    } else if(charAt === 'u'){
                        textOutput += 'ufat';
                    } else {
                        textOutput += charAt;
                    }
                }

                divNoContent.style.display = "none";
                divResult.style.display = "table-cell";
                inputOutput.value = textOutput;

                scrollMobile();

            }
        }

        function decrypt() {
            var inputEntry = document.getElementById('inputEntry');
            var inputOutput = document.getElementById('inputOutput');
            var divNoContent = document.getElementById('no-content');
            var divResult = document.getElementById('result');
            var textEntry = inputEntry.value;
            inputOutput.value = '';
            var textOutput = inputOutput.value;
            
            if(textEntry == ""){
                addError(inputEntry);
            } else {
                removeError(inputEntry);
                for (var i = 0; i < textEntry.length; i++) {
                    var restLetters = '';
                    var charAt = textEntry.charAt(i);                    
                    if(charAt === 'e'){
                        restLetters = textEntry.substring(i, i+5);
                        if(restLetters === 'enter'){
                            textOutput += 'e';
                            i += 4;
                        } else {
                            textOutput += charAt;
                        }
                    } else if(charAt === 'i'){
                        restLetters = textEntry.substring(i, i+4);
                        if(restLetters === 'imes'){
                            textOutput += 'i';
                            i += 3;
                        } else {
                            textOutput += charAt;
                        }
                    } else if(charAt === 'a'){
                        restLetters = textEntry.substring(i, i+2);
                        if(restLetters === 'ai'){
                            textOutput += 'a';
                            i += 1;
                        } else {
                            textOutput += charAt;
                        }
                    } else if(charAt === 'o'){
                        restLetters = textEntry.substring(i, i+4);
                        if(restLetters === 'ober'){
                            textOutput += 'o';
                            i += 3;
                        } else {
                            textOutput += charAt;
                        }
                    } else if(charAt === 'u'){
                        restLetters = textEntry.substring(i, i+4);
                        if(restLetters === 'ufat'){
                            textOutput += 'u';
                            i += 3;
                        } else {
                            textOutput += charAt;
                        }
                    } else {
                        textOutput += charAt;
                    }
                }

                divNoContent.style.display = "none";
                divResult.style.display = "table-cell";
                inputOutput.value = textOutput;

                scrollMobile();
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1><a href="/"><img src="src/img/logo.png" alt="Logotipo"></a></h1>
        <div class="entry">
            <textarea type="text" placeholder="Digite seu texto" id="inputEntry" required></textarea>
            <div class="container-info">
                <span class="material-symbols-rounded">info</span>
                <p class="info">Apenas letras minúsculas e sem acento.</p>
            </div>
            <div class="container-buttons">
                <button class="encrypt" onclick="encrypt()">Criptografar</button>
                <button class="decrypt" onclick="decrypt()">Descriptografar</button>
            </div>
        </div>

        <div class="output">
            <div class="container-output" id="no-content">
                <img src="src/img/no-content.png"> 
                <h2>Nenhuma mensagem encontrada</h2>
                <p>
                    Digite um texto que você deseja criptografar ou descriptografar.
                </p>    
            </div>

            <div class="container-output" id="result">
                <textarea type="text" id="inputOutput"></textarea>
                <button class="copy" onclick="copy()">Copiar</button>
            </div>            
        </div>
    </div>
    <footer>
        <p>
            <span> Desenvolvido por Henrique Fernandes Neto </span>
            <span><a href="https://www.linkedin.com/in/henrique-fernandes-neto/" target="_blank" rel="linkedin">LinkedIn</a></span>
            <span><a href="https://github.com/fernandeshenrique15/" target="_blank" rel="github">Github</a></span>
            <span><a href="https://api.whatsapp.com/send?phone=554896112766" target="_blank" rel="whatsapp">WhatsApp</a></span>
        </p>
    </footer>
</body>
</html>